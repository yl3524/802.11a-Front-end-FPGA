function output = demodulate_pattern(dataInlv_bin, N_bpsc)

%DEMODULATE_PATTERN Summary of this function goes here
%   Demodulate frequency-domain signal to binary array based on N_bpsc

%   Detailed explanation goes here
%   demodulation includes BPSK, QPSK, 16-QAM and 64-QAM   

    switch N_bpsc 
        case 1 % BPSK
            output = qamdemod(dataInlv_bin, 2^1);
        case 2 % QPSK
            output = qamdemod(dataInlv_bin,2^2, [1,0,3,2], ...
                'OutputType','bit','UnitAveragePower',true);
        case 4 % 16-QAM
            output = qamdemod(dataInlv_bin, 2^4, [2,3,1,0,6,7,5,4,14,15,13,12,10,11,9,8], ...
                'OutputType','bit','UnitAveragePower',true);
        case 6 % 64-QAM
            output = qamdemod(dataInlv_bin, 2^6, [4,5,7,6,2,3,1,0, ...
                                                         12,13,15,14,10,11,9,8, ...
                                                         28,29,31,30,26,27,25,24, ...
                                                         20,21,23,22,18,19,17,16, ...
                                                         52,53,55,54,50,51,49,48, ...
                                                         60,61,63,62,58,59,57,56, ...
                                                         44,45,47,46,42,43,41,40, ...
                                                         36,37,39,38,34,35,33,32], ...
                'OutputType','bit','UnitAveragePower',true);
    end

end
